# report-formatting
App prototype - Raw Javascript code designed to be used within the browser console in order to extract student report data from an HTML output file

---

HTML to CSV School Report Formatting

---

Client... Christopher Guerin

Challenge Set...  24/04/21
    My brother-in-law (Chris Guerin) is a Physics Teacher in an UK Independent School.  He was having difficulty accessing report data in the school's new system since it only output the data as an HTML file or a PDF.  Chris required the data in a CSV format to allow him to easily input the data into a spreadsheet for additional analysis.  He provided me with an example HTML file with the student and teacher names changed for data protection requirements, but with the same format (upper/lower case and punctuation) as the original data.

Sample data... viewreportsprint_dp.html

Code produced... finalVersionChris.js   27/04/21

User Instructions...  (copy of instructions emailed to client)
    So, you can use it (before I make it pretty with a user interface etc) like this:
        1.  go to https://github.com/cordeiguerin/projects/ and either download as zip (via the green clone button) or click on the file itself and copy and paste.
        2.  go to the html page you want to extract data from within a browser (I used Chrome, but it should work in any browser)
        3.  bring up the developers tools' console (F12 in Chrome)
        4.  click the stop icon to clear the console.
        5.  copy the whole code from the file into the console and press enter.
        6.  you will get an array of strings, one for each student on the page.  Copy the info between the square brackets into a text editor, 
        7.  remove the quotation marks and put each student on a new line.
        8.  save as a csv.

---

Client Feedback...
    Email from client - 03/05/21
        "That's brilliant!
        There are some errors, for example some items called "S…g" or similar, and all subjects seem to be "CLASSICS".
        But great work, it'll be useful as-is even without fixing.  I'd love to be able to amend it myself - but … regexp!"

    My Output:
        ["GUERIN,Christopher,CLASSICS,Self-awareness,Always,…e,Effort - In Class,A,Effort - Independent Work,B", "GUERIN,Christopher,CLASSICS,Self-awareness,Often,S…g,Effort - In Class,C,Effort - Independent Work,C", "GUERIN,Christopher,CLASSICS,Self-awareness,Always,…e,Effort - In Class,A,Effort - Independent Work,B", "GUERIN,Christopher,CLASSICS,Self-awareness,Often,S…e,Effort - In Class,B,Effort - Independent Work,B", "GUERIN,Christopher,CLASSICS,Self-awareness,Always,…e,Effort - In Class,A,Effort - Independent Work,B", "GUERIN,Christopher,CLASSICS,Self-awareness,Always,…e,Effort - In Class,A,Effort - Independent Work,B", "GUERIN,Christopher,CLASSICS,Self-awareness,Often,S…g,Effort - In Class,B,Effort - Independent Work,B", "GUERIN,Christopher,CLASSICS,Self-awareness,Always,…e,Effort - In Class,A,Effort - Independent Work,B", "GUERIN,Christopher,CLASSICS,Self-awareness,Often,S…g,Effort - In Class,C,Effort - Independent Work,C", "GUERIN,Christopher,CLASSICS,Self-awareness,Always,…e,Effort - In Class,A,Effort - Independent Work,A", "GUERIN,Christopher,CLASSICS,Self-awareness,Always,…e,Effort - In Class,A,Effort - Independent Work,A"]

        0: "GUERIN,Christopher,CLASSICS,Self-awareness,Always,Self-Regulation,Often,Social and Communication Skills,Always,Resilience and Coping,Always,Attainment (ARE),Secure,Effort - In Class,A,Effort - Independent Work,B,DRAMA,Self-awareness,Often,Self-Regulation,Often,Social and Communication Skills,Always,Resilience and Coping,Often,Attainment (ARE),Developing,Effort - In Class,B,Effort - Independent Work,B,ENGLISH,Self-awareness,Often,Self-Regulation,Often,Social and Communication Skills,Always,Resilience and Coping,Always,Attainment (ARE),,Effort - In Class,B,Effort - Independent Work,B,FRENCH,Self-awareness,Often,Self-Regulation,Often,Social and Communication Skills,Always,Resilience and Coping,Always,Attainment (ARE),Developing,Effort - In Class,A,Effort - Independent Work,A,HISTORY,Self-awareness,Often,Self-Regulation,Often,Social and Communication Skills,Always,Resilience and Coping,Always,Attainment (ARE),Secure,Effort - In Class,B,Effort - Independent Work,B,MUSIC,Self-awareness,Often,Self-Regulation,Often,Social and Communication Skills,Always,Resilience and Coping,Always,Attainment (ARE),Secure,Effort - In Class,B,Effort - Independent Work,B,PE FOR ALL,Self-awareness,Always,Self-Regulation,Always,Social and Communication Skills,Always,Resilience and Coping,Always,Attainment (ARE),Secure,Effort - In Class,A,SPANISH,Self-awareness,Often,Self-Regulation,Often,Social and Communication Skills,Always,Resilience and Coping,Always,Attainment (ARE),Secure,Effort - In Class,A,Effort - Independent Work,B"
        
        1: "GUERIN,Christopher,CLASSICS,Self-awareness,Often,Self-Regulation,Often,Social and Communication Skills,Often,Resilience and Coping,Often,Attainment (ARE),Developing,Effort - In Class,B,Effort - Independent Work,B,DRAMA,Self-awareness,Often,Self-Regulation,Sometimes,Social and Communication Skills,Often,Resilience and Coping,Often,Attainment (ARE),Developing,Effort - In Class,B,Effort - Independent Work,B,FRENCH,Self-awareness,Often,Self-Regulation,Sometimes,Social and Communication Skills,Always,Resilience and Coping,Often,Attainment (ARE),Secure,Effort - In Class,C,Effort - Independent Work,C,HISTORY,Self-awareness,Often,Self-Regulation,Often,Social and Communication Skills,Always,Resilience and Coping,Often,Attainment (ARE),Secure,Effort - In Class,B,Effort - Independent Work,B,MATHS,Self-awareness,Sometimes,Self-Regulation,Sometimes,Social and Communication Skills,Often,Resilience and Coping,Often,Attainment (ARE),Secure,Effort - In Class,B,Effort - Independent Work,B,MUSIC,Self-awareness,Often,Self-Regulation,Often,Social and Communication Skills,Always,Resilience and Coping,Often,Attainment (ARE),Secure,Effort - In Class,B,Effort - Independent Work,B,SPANISH,Self-awareness,Often,Self-Regulation,Often,Social and Communication Skills,Always,Resilience and Coping,Often,Attainment (ARE),Emerging,Effort - In Class,C,Effort - Independent Work,C"
        
        2: "GUERIN,Christopher,CLASSICS,Self-awareness,Always,Self-Regulation,Often,Social and Communication Skills,Always,Resilience and Coping,Always,Attainment (ARE),Secure,Effort - In Class,A,Effort - Independent Work,B,DRAMA,Self-awareness,Always,Self-Regulation,Always,Social and Communication Skills,Always,Resilience and Coping,Always,Attainment (ARE),Secure,Effort - In Class,A,Effort - Independent Work,A,HISTORY,Self-awareness,Always,Self-Regulation,Always,Social and Communication Skills,Always,Resilience and Coping,Always,Attainment (ARE),Secure,Effort - In Class,A,Effort - Independent Work,A,MATHS,Self-awareness,Always,Self-Regulation,Always,Social and Communication Skills,Often,Resilience and Coping,Always,Attainment (ARE),Secure,Effort - In Class,A,Effort - Independent Work,B,MUSIC,Self-awareness,Always,Self-Regulation,Always,Social and Communication Skills,Always,Resilience and Coping,Always,Attainment (ARE),Secure,Effort - In Class,A,Effort - Independent Work,A,PE FOR ALL,Self-awareness,Always,Self-Regulation,Always,Social and Communication Skills,Always,Resilience and Coping,Always,Attainment (ARE),Developing,Effort - In Class,A,SPANISH,Self-awareness,Always,Self-Regulation,Always,Social and Communication Skills,Always,Resilience and Coping,Always,Attainment (ARE),Secure,Effort - In Class,A,Effort - Independent Work,B"
        
        3: "GUERIN,Christopher,CLASSICS,Self-awareness,Often,Self-Regulation,Often,Social and Communication Skills,Always,Resilience and Coping,Always,Attainment (ARE),Developing,Effort - In Class,B,Effort - Independent Work,B,DRAMA,Self-awareness,Always,Self-Regulation,Often,Social and Communication Skills,Always,Resilience and Coping,Often,Attainment (ARE),Greater Depth,Effort - In Class,A*,Effort - Independent Work,A,FRENCH,Self-awareness,Always,Self-Regulation,Often,Social and Communication Skills,Always,Resilience and Coping,Always,Attainment (ARE),Secure,Effort - In Class,B,Effort - Independent Work,B,HISTORY,Self-awareness,Often,Self-Regulation,Often,Social and Communication Skills,Always,Resilience and Coping,Always,Attainment (ARE),Secure,Effort - In Class,B,Effort - Independent Work,B,MATHS,Self-awareness,Often,Self-Regulation,Often,Social and Communication Skills,Often,Resilience and Coping,Often,Attainment (ARE),Secure,Effort - In Class,B,Effort - Independent Work,B,MUSIC,Self-awareness,Often,Self-Regulation,Often,Social and Communication Skills,Always,Resilience and Coping,Always,Attainment (ARE),Greater Depth,Effort - In Class,A,Effort - Independent Work,B,SPANISH,Self-awareness,Often,Self-Regulation,Often,Social and Communication Skills,Always,Resilience and Coping,Always,Attainment (ARE),Secure,Effort - In Class,B,Effort - Independent Work,B"
        
        4: "GUERIN,Christopher,CLASSICS,Self-awareness,Always,Self-Regulation,Often,Social and Communication Skills,Often,Resilience and Coping,Always,Attainment (ARE),Secure,Effort - In Class,A,Effort - Independent Work,B,DRAMA,Self-awareness,Often,Self-Regulation,Often,Social and Communication Skills,Always,Resilience and Coping,Always,Attainment (ARE),Secure,Effort - In Class,A,Effort - Independent Work,B,HISTORY,Self-awareness,Always,Self-Regulation,Often,Social and Communication Skills,Always,Resilience and Coping,Always,Attainment (ARE),Secure,Effort - In Class,A,Effort - Independent Work,B,MATHS,Self-awareness,Always,Self-Regulation,Always,Social and Communication Skills,Always,Resilience and Coping,Often,Attainment (ARE),Secure,Effort - In Class,A,Effort - Independent Work,A,MUSIC,Self-awareness,Always,Self-Regulation,Often,Social and Communication Skills,Always,Resilience and Coping,Always,Attainment (ARE),Secure,Effort - In Class,A,Effort - Independent Work,A,SPANISH,Self-awareness,Always,Self-Regulation,Often,Social and Communication Skills,Always,Resilience and Coping,Always,Attainment (ARE),Secure,Effort - In Class,A,Effort - Independent Work,B"
        
        5: "GUERIN,Christopher,CLASSICS,Self-awareness,Always,Self-Regulation,Often,Social and Communication Skills,Always,Resilience and Coping,Always,Attainment (ARE),Secure,Effort - In Class,B,Effort - Independent Work,B,DRAMA,Self-awareness,Always,Self-Regulation,Often,Social and Communication Skills,Always,Resilience and Coping,Always,Attainment (ARE),Secure,Effort - In Class,A,Effort - Independent Work,A,HISTORY,Self-awareness,Always,Self-Regulation,Often,Social and Communication Skills,Always,Resilience and Coping,Always,Attainment (ARE),Secure,Effort - In Class,B,Effort - Independent Work,B,MATHS,Self-awareness,Always,Self-Regulation,Often,Social and Communication Skills,Always,Resilience and Coping,Always,Attainment (ARE),Secure,Effort - In Class,A,Effort - Independent Work,B,MUSIC,Self-awareness,Always,Self-Regulation,Often,Social and Communication Skills,Always,Resilience and Coping,Always,Attainment (ARE),Secure,Effort - In Class,A,Effort - Independent Work,A,SPANISH,Self-awareness,Always,Self-Regulation,Always,Social and Communication Skills,Always,Resilience and Coping,Always,Attainment (ARE),Secure,Effort - In Class,A,Effort - Independent Work,B"
        
        6: "GUERIN,Christopher,CLASSICS,Self-awareness,Often,Self-Regulation,Often,Social and Communication Skills,Always,Resilience and Coping,Always,Attainment (ARE),Developing,Effort - In Class,A,Effort - Independent Work,B,DRAMA,Self-awareness,Often,Self-Regulation,Often,Social and Communication Skills,Always,Resilience and Coping,Often,Attainment (ARE),Secure,Effort - In Class,A,Effort - Independent Work,B,HISTORY,Self-awareness,Often,Self-Regulation,Often,Social and Communication Skills,Always,Resilience and Coping,Always,Attainment (ARE),Developing,Effort - In Class,B,Effort - Independent Work,B,MUSIC,Self-awareness,Often,Self-Regulation,Often,Social and Communication Skills,Always,Resilience and Coping,Always,Attainment (ARE),Secure,Effort - In Class,A,Effort - Independent Work,B,SPANISH,Self-awareness,Often,Self-Regulation,Often,Social and Communication Skills,Always,Resilience and Coping,Always,Attainment (ARE),Developing,Effort - In Class,B,Effort - Independent Work,B"
        
        7: "GUERIN,Christopher,CLASSICS,Self-awareness,Always,Self-Regulation,Always,Social and Communication Skills,Always,Resilience and Coping,Always,Attainment (ARE),Developing,Effort - In Class,A,Effort - Independent Work,B,DRAMA,Self-awareness,Always,Self-Regulation,Always,Social and Communication Skills,Always,Resilience and Coping,Always,Attainment (ARE),Greater Depth,Effort - In Class,A,Effort - Independent Work,A,HISTORY,Self-awareness,Always,Self-Regulation,Always,Social and Communication Skills,Always,Resilience and Coping,Always,Attainment (ARE),Secure,Effort - In Class,A,Effort - Independent Work,A,MATHS,Self-awareness,Always,Self-Regulation,Often,Social and Communication Skills,Always,Resilience and Coping,Always,Attainment (ARE),Secure,Effort - In Class,A,Effort - Independent Work,B,MUSIC,Self-awareness,Always,Self-Regulation,Always,Social and Communication Skills,Always,Resilience and Coping,Always,Attainment (ARE),Secure,Effort - In Class,A,Effort - Independent Work,B,PE FOR ALL,Self-awareness,Always,Self-Regulation,Always,Social and Communication Skills,Always,Resilience and Coping,Always,Attainment (ARE),Secure,Effort - In Class,A,SPANISH,Self-awareness,Always,Self-Regulation,Always,Social and Communication Skills,Always,Resilience and Coping,Always,Attainment (ARE),Secure,Effort - In Class,A,Effort - Independent Work,B"
        
        8: "GUERIN,Christopher,CLASSICS,Self-awareness,Often,Self-Regulation,Often,Social and Communication Skills,Often,Resilience and Coping,Always,Attainment (ARE),Developing,Effort - In Class,B,Effort - Independent Work,B,DRAMA,Self-awareness,Often,Self-Regulation,Sometimes,Social and Communication Skills,Often,Resilience and Coping,Often,Attainment (ARE),Developing,Effort - In Class,B,Effort - Independent Work,C,HISTORY,Self-awareness,Often,Self-Regulation,Sometimes,Social and Communication Skills,Often,Resilience and Coping,Often,Attainment (ARE),Developing,Effort - In Class,B,Effort - Independent Work,B,MUSIC,Self-awareness,Often,Self-Regulation,Sometimes,Social and Communication Skills,Often,Resilience and Coping,Often,Attainment (ARE),Developing,Effort - In Class,B,Effort - Independent Work,B,SPANISH,Self-awareness,Often,Self-Regulation,Sometimes,Social and Communication Skills,Often,Resilience and Coping,Often,Attainment (ARE),Developing,Effort - In Class,C,Effort - Independent Work,C"
        
        9: "GUERIN,Christopher,CLASSICS,Self-awareness,Always,Self-Regulation,Always,Social and Communication Skills,Always,Resilience and Coping,Often,Attainment (ARE),Secure,Effort - In Class,A,Effort - Independent Work,B,DRAMA,Self-awareness,Often,Self-Regulation,Sometimes,Social and Communication Skills,Sometimes,Resilience and Coping,Often,Attainment (ARE),Developing,Effort - In Class,B,Effort - Independent Work,B,FRENCH,Self-awareness,Always,Self-Regulation,Always,Social and Communication Skills,Sometimes,Resilience and Coping,Often,Attainment (ARE),Secure,Effort - In Class,A,Effort - Independent Work,A,HISTORY,Self-awareness,Often,Self-Regulation,Always,Social and Communication Skills,Often,Resilience and Coping,Often,Attainment (ARE),Secure,Effort - In Class,B,Effort - Independent Work,C,MATHS,Self-awareness,Always,Self-Regulation,Always,Social and Communication Skills,Always,Resilience and Coping,Always,Attainment (ARE),Greater Depth,Effort - In Class,A*,Effort - Independent Work,A,MUSIC,Self-awareness,Often,Self-Regulation,Often,Social and Communication Skills,Often,Resilience and Coping,Often,Attainment (ARE),Greater Depth,Effort - In Class,B,Effort - Independent Work,B,PE FOR ALL,Self-awareness,Often,Self-Regulation,Sometimes,Social and Communication Skills,Often,Resilience and Coping,Sometimes,Attainment (ARE),Developing,Effort - In Class,A,SPANISH,Self-awareness,Always,Self-Regulation,Always,Social and Communication Skills,Always,Resilience and Coping,Always,Attainment (ARE),Secure,Effort - In Class,A,Effort - Independent Work,A"
        
        10: "GUERIN,Christopher,CLASSICS,Self-awareness,Always,Self-Regulation,Always,Social and Communication Skills,Always,Resilience and Coping,Often,Attainment (ARE),Secure,Effort - In Class,A,Effort - Independent Work,B,DRAMA,Self-awareness,Often,Self-Regulation,Sometimes,Social and Communication Skills,Sometimes,Resilience and Coping,Often,Attainment (ARE),Developing,Effort - In Class,B,Effort - Independent Work,B,FRENCH,Self-awareness,Always,Self-Regulation,Always,Social and Communication Skills,Sometimes,Resilience and Coping,Often,Attainment (ARE),Secure,Effort - In Class,A,Effort - Independent Work,A,HISTORY,Self-awareness,Often,Self-Regulation,Always,Social and Communication Skills,Often,Resilience and Coping,Often,Attainment (ARE),Secure,Effort - In Class,B,Effort - Independent Work,C,MATHS,Self-awareness,Always,Self-Regulation,Always,Social and Communication Skills,Always,Resilience and Coping,Always,Attainment (ARE),Greater Depth,Effort - In Class,A*,Effort - Independent Work,A,MUSIC,Self-awareness,Often,Self-Regulation,Often,Social and Communication Skills,Often,Resilience and Coping,Often,Attainment (ARE),Greater Depth,Effort - In Class,B,Effort - Independent Work,B,PE FOR ALL,Self-awareness,Often,Self-Regulation,Sometimes,Social and Communication Skills,Often,Resilience and Coping,Sometimes,Attainment (ARE),Developing,Effort - In Class,A,SPANISH,Self-awareness,Always,Self-Regulation,Always,Social and Communication Skills,Always,Resilience and Coping,Always,Attainment (ARE),Secure,Effort - In Class,A,Effort - Independent Work,A"

    Debugging:
        Client copied the summary of the array, instead of the full strings for each entry.  This meant that he only received the beginning and end of each string.  This explains the issues he found.  
        
    Email sent to client -  04/05/21 (data truncated here for readability):

        "So, this is ALL the data that is produced by the js I sent to you...

        (11) ["GUERIN,Christopher,CLASSICS,Self-awareness,Always,…e,Effort - In Class,A,Effort - Independent Work,A"]

        0: "GUERIN,Christopher,CLASSICS... Independent Work,B"
        1: "GUERIN,Christopher,CLASSICS... Independent Work,C"
        2: "GUERIN,Christopher,CLASSICS... Independent Work,B"
        3: "GUERIN,Christopher,CLASSICS... Independent Work,B"
        4: "GUERIN,Christopher,CLASSICS... Independent Work,B"
        5: "GUERIN,Christopher,CLASSICS... Independent Work,B"
        6: "GUERIN,Christopher,CLASSICS... Independent Work,B"
        7: "GUERIN,Christopher,CLASSICS... Independent Work,B"
        8: "GUERIN,Christopher,CLASSICS... Independent Work,C"
        9: "GUERIN,Christopher,CLASSICS... Independent Work,A"
        10: "GUERIN,Christopher,CLASSICS... - Independent Work,A"
        length: 11__proto__: Array(0)

        The top part, between the square brackets, is a summary of the array.  The data is truncated with the triple dots showing where data is missing.  I think this is the bit you copied.
        
        If you had clicked on the arrow to the left of this summary, you would bring the display of the full data.  Each student is one string in one array index, so student number one is in the array[0] position and the full string is (I've manually added in newlines to make sure that you can view the whole string)...

        "GUERIN,Christopher,CLASSICS,Self-awareness,Always,Self-Regulation,Often,Social and Communication Skills,Always,Resilience and Coping,Always,Attainment (ARE),Secure,Effort - In Class,A,Effort - Independent Work,B,DRAMA,Self-awareness,Often,Self-Regulation,Often,Social and Communication Skills,Always,Resilience and Coping,Often,Attainment (ARE),Developing,Effort - In Class,B,Effort - Independent Work,B,ENGLISH,Self-awareness,Often,Self-Regulation,Often,Social and Communication Skills,Always,Resilience and Coping,Always,Attainment (ARE),,Effort - In Class,B,Effort - Independent Work,B,FRENCH,Self-awareness,Often,Self-Regulation,Often,Social and Communication Skills,Always,Resilience and Coping,Always,Attainment (ARE),Developing,Effort - In Class,A,Effort - Independent Work,A,HISTORY,Self-awareness,Often,Self-Regulation,Often,Social and Communication Skills,Always,Resilience and Coping,Always,Attainment (ARE),Secure,Effort - In Class,B,Effort - Independent Work,B,MUSIC,Self-awareness,Often,Self-Regulation,Often,Social and Communication Skills,Always,Resilience and Coping,Always,Attainment (ARE),Secure,Effort - In Class,B,Effort - Independent Work,B,PE FOR ALL,Self-awareness,Always,Self-Regulation,Always,Social and Communication Skills,Always,Resilience and Coping,Always,Attainment (ARE),Secure,Effort - In Class,A,SPANISH,Self-awareness,Often,Self-Regulation,Often,Social and Communication Skills,Always,Resilience and Coping,Always,Attainment (ARE),Secure,Effort - In Class,A,Effort - Independent Work,B"

        So... it looks like it works as I intended.
        
        I'm trying to come up with a GUI for you, but it's a steep learning curve due to the file input and output. I'll let you know when I have cracked it!"
